<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    カラーテーマを変更できるようにしました! The Infinity's Article
  </title>
  <link rel="stylesheet" href="/InfinitySpirit/layout/style.css" />
  <script defer src="/InfinitySpirit/layout/script.js"></script>
  <script defer src="/app/audio-player/insert.js"></script>
  <link rel="stylesheet" href="/layout/style.css" />
  <script defer src="/layout/script.js"></script>
  <meta name="description" content="The Infinity's articles " />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="カラーテーマを変更できるようにしました!" />
  <meta property="og:description" content="Welcome to The Infinitys's Article!" />
  <meta property="og:image" content="https://the-infinitys.f5.si/article-2024/07/enable-change-color-theme/thumbnail.png" />
  <!--icon-->
  <link rel="apple-touch-icon" type="image/png" href="/image/favicon/apple-touch-icon-256x256.png" />
  <link rel="icon" type="image/png" href="/image/favicon/icon-256x256.png" />
  <!-- for Google -->
  <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6F5Z0EB6JE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-6F5Z0EB6JE");
  </script>
  <script defer src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2045274771035552"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="article-body">
    <div class="article-title">
      カラーテーマを変更できるようにしました!
      <br />
      <svg class="clock-watch" version="1.1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 100 100" stroke="#888" fill="none" stroke-width="5"
        stroke-linecap="round">
        <g class="Infinity-clock_frame">
          <circle cx="50" cy="50" r="40" />
          <circle cx="50" cy="50" r="30" stroke-opacity="0.5" />
          <ellipse cx="37.5" cy="50" rx="12.5" ry="10" stroke-width="2" stroke-opacity="0.5" />
          <ellipse cx="62.5" cy="50" rx="12.5" ry="10" stroke-width="2" stroke-opacity="0.5" />
          <animate attributeName="stroke" dur="5s" repeatCount="indefinite"
            values="#ff0000;#ffff00;#00ff00;#00ffff;#0000ff;#ff00ff;#ff0000">
        </g>
        <g class="Infinity-clock_hands">
          <path d="M50 50,L50 20 Z" />
          <path d="M50 50,L60 60 Z" />
        </g>
      </svg>
      <InfinitySpiritDate>2024/07/29</InfinitySpiritDate>
      <br />
    </div>
    <div class="article-content">
      <InfinitySpiritContent>
          <h1 id="_1">カラーテーマを変更できるようにしました!</h1>
          <p>どうも！The Infinity&rsquo;sです！<br />
          最近ブログのネタが全く思いつかなくてですね&hellip;<br />
          なんとか絞り出したのがこのネタです。<br />
          Webサイトでローカルストレージについて勉強してみようと思った次第です。<br />
          仕組みとしては&hellip;次のコードを見れば解ると思います。</p>
          <h2 id="_2">コードの全体図</h2>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #959077">// init color theme</span>
<span style="color: #66d9ef">let</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">init_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> () =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">ls_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">localStorage</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">getItem</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;color-theme&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">if</span><span style="color: #f8f8f2"> (</span><span style="color: #a6e22e">ls_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">==</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">null</span><span style="color: #f8f8f2">) {</span>
<span style="color: #f8f8f2">    </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #a6e22e">localStorage</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setItem</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;color-theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  } </span><span style="color: #66d9ef">else</span><span style="color: #f8f8f2"> {</span>
<span style="color: #f8f8f2">    </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">ls_color_theme</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">  }</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">auto_color_theme</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">};</span>
<span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">renew_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> () =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> document.</span><span style="color: #a6e22e">querySelector</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;#color-theme-change&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">localStorage</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setItem</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;color-theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">switch</span><span style="color: #f8f8f2"> (</span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2">) {</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">case</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;light&quot;</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;light&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">style</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">backgroundColor</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;white&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">case</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;dark&quot;</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;dark&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">style</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">backgroundColor</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;black&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">case</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">style</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">backgroundColor</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;gray&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">if</span><span style="color: #f8f8f2"> (window.</span><span style="color: #a6e22e">matchMedia</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;(prefers-color-scheme: dark)&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">matches</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">==</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">true</span><span style="color: #f8f8f2">) {</span>
<span style="color: #f8f8f2">        document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;dark&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      } </span><span style="color: #66d9ef">else</span><span style="color: #f8f8f2"> {</span>
<span style="color: #f8f8f2">        document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;light&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      }</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">default</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">alert</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;error happend on change color theme&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">  }</span>
<span style="color: #f8f8f2">};</span>
<span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">change_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> (</span><span style="color: #a6e22e">mode</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">null</span><span style="color: #f8f8f2">) =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">mode</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">renew_color_theme</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">};</span>
          </code></pre></div>
          
          <p>まずは１つ目です。</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">let</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #f8f8f2">;</span>
          </code></pre></div>
          
          <p>この変数にどのカラーテーマが選択されているのかの状況を文字列で格納します。</p>
          <p>次</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">init_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> () =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">ls_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">localStorage</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">getItem</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;color-theme&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">if</span><span style="color: #f8f8f2"> (</span><span style="color: #a6e22e">ls_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">==</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">null</span><span style="color: #f8f8f2">) {</span>
<span style="color: #f8f8f2">    </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #a6e22e">localStorage</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setItem</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;color-theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  } </span><span style="color: #66d9ef">else</span><span style="color: #f8f8f2"> {</span>
<span style="color: #f8f8f2">    </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">ls_color_theme</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">  }</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">auto_color_theme</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">};</span>
          </code></pre></div>
          
          <p>この関数で初期化を実行します。<br />
          ここで人生で初めてlocalStorageを使いました。<br />
          いくつか紹介していない関数があるので紹介</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">renew_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> () =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> document.</span><span style="color: #a6e22e">querySelector</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;#color-theme-change&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">localStorage</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setItem</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;color-theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">switch</span><span style="color: #f8f8f2"> (</span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2">) {</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">case</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;light&quot;</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;light&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">style</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">backgroundColor</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;white&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">case</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;dark&quot;</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;dark&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">style</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">backgroundColor</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;black&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">case</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;auto&quot;</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">change_button</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">style</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">backgroundColor</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #e6db74">&quot;gray&quot;</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">if</span><span style="color: #f8f8f2"> (window.</span><span style="color: #a6e22e">matchMedia</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;(prefers-color-scheme: dark)&quot;</span><span style="color: #f8f8f2">).</span><span style="color: #a6e22e">matches</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">==</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">true</span><span style="color: #f8f8f2">) {</span>
<span style="color: #f8f8f2">        document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;dark&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      } </span><span style="color: #66d9ef">else</span><span style="color: #f8f8f2"> {</span>
<span style="color: #f8f8f2">        document.</span><span style="color: #a6e22e">documentElement</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">setAttribute</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;theme&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #e6db74">&quot;light&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      }</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">    </span><span style="color: #66d9ef">default</span><span style="color: #ff4689">:</span>
<span style="color: #f8f8f2">      </span><span style="color: #a6e22e">alert</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;error happend on change color theme&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">      </span><span style="color: #66d9ef">break</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">  }</span>
<span style="color: #f8f8f2">};</span>
          </code></pre></div>
          
          <p>この関数でcssの変数を更新して、テーマを更新します。</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">change_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> (</span><span style="color: #a6e22e">mode</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #66d9ef">null</span><span style="color: #f8f8f2">) =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">mode</span><span style="color: #f8f8f2">;</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">renew_color_theme</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">};</span>
          </code></pre></div>
          
          <p>この関数をカラーテーマを変えるボタンに適用することで、ボタンが押されたときに引数に応じてカラーテーマを更新できるようにします。</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">auto_color_theme</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> () =&gt; {</span>
<span style="color: #f8f8f2">  </span><span style="color: #66d9ef">const</span><span style="color: #f8f8f2"> </span><span style="color: #a6e22e">mediaQuery</span><span style="color: #f8f8f2"> </span><span style="color: #ff4689">=</span><span style="color: #f8f8f2"> window.</span><span style="color: #a6e22e">matchMedia</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;(prefers-color-scheme: dark)&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">  </span><span style="color: #a6e22e">mediaQuery</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">addEventListener</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;change&quot;</span><span style="color: #f8f8f2">, </span><span style="color: #a6e22e">renew_color_theme</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">};</span>
          </code></pre></div>
          
          <p>これは、最初にページを訪れた際や、カラーテーマでautoが選択されたときに使用される関数です。</p>
          <p>以上のプログラムを、The<em>Infinitys</em>main関数の中に入れ込んで、<br />
          一気に実行します。<br />
          そして完成です。</p>
          <h2 id="_3">感想</h2>
          <p><strong>ブログ書くのは<s>思った以上に</s>大変</strong></p>

          </InfinitySpiritContent>
    </div>
    <div class="article-share" onclick="copyURL()">
      <img src="/InfinitySpirit/layout/image/Infinity-clipboard.svg" alt="" />
      Copy To ClipBoard
    </div>
    <div class="article-share" onclick="shareX()">
      <img src="/InfinitySpirit/layout/image/X-Infinity.svg" alt="" />
      Share On X
    </div>
    <div class="article-index"></div>
    <div class="articles-recommended">
      <button>
        <img src="/InfinitySpirit/layout/image/loading.svg" alt="" />
        <div>
          <h1>THE INFINITYS BELIEVE THE INFINITY</h1>
          <p>date:2024/07/07</p>
        </div>
      </button>
    </div>
  </div>
</body>

</html>
