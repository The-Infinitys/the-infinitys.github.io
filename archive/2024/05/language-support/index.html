<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>
    Language Support The Infinity's Article
  </title>
  <link rel="stylesheet" href="/InfinitySpirit/layout/style.css" />
  <script defer src="/InfinitySpirit/layout/script.js"></script>
  <script defer src="/app/audio-player/insert.js"></script>
  <link rel="stylesheet" href="/layout/style.css" />
  <script defer src="/layout/script.js"></script>
  <meta name="description" content="The Infinity's articles " />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Language Support" />
  <meta property="og:description" content="Welcome to The Infinitys's Article!" />
  <meta property="og:image" content="https://the-infinitys.f5.si/article-2024/05/language-support/thumbnail.png" />
  <!--icon-->
  <link rel="apple-touch-icon" type="image/png" href="/image/favicon/apple-touch-icon-256x256.png" />
  <link rel="icon" type="image/png" href="/image/favicon/icon-256x256.png" />
  <!-- for Google -->
  <script defer src="https://www.googletagmanager.com/gtag/js?id=G-6F5Z0EB6JE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-6F5Z0EB6JE");
  </script>
  <script defer src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2045274771035552"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="article-body">
    <div class="article-title">
      Language Support
      <br />
      <svg class="clock-watch" version="1.1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 100 100" stroke="#888" fill="none" stroke-width="5"
        stroke-linecap="round">
        <g class="Infinity-clock_frame">
          <circle cx="50" cy="50" r="40" />
          <circle cx="50" cy="50" r="30" stroke-opacity="0.5" />
          <ellipse cx="37.5" cy="50" rx="12.5" ry="10" stroke-width="2" stroke-opacity="0.5" />
          <ellipse cx="62.5" cy="50" rx="12.5" ry="10" stroke-width="2" stroke-opacity="0.5" />
          <animate attributeName="stroke" dur="5s" repeatCount="indefinite"
            values="#ff0000;#ffff00;#00ff00;#00ffff;#0000ff;#ff00ff;#ff0000">
        </g>
        <g class="Infinity-clock_hands">
          <path d="M50 50,L50 20 Z" />
          <path d="M50 50,L60 60 Z" />
        </g>
      </svg>
      <InfinitySpiritDate>2024/05/31</InfinitySpiritDate>
      <br />
    </div>
    <div class="article-content">
      <InfinitySpiritContent>
          <h1>Language Support</h1>
          <p>つい最近contactページを作成しました。</p>
          <p><img src="./img/contact.png" alt="CONTACT PAGE" style="width: 100%" /></p>
          <p>Google Formを埋め込んで、データを楽に受け取れるようにしてます。</p>
          <p>でこれを運用し始めて早一日...</p>
          <h4>
          "I have a question about the operation of the site, do you plan to
          implement an English version?"
          </h4>
          <h4>
          「サイトの運営について質問があるのですが、英語版を導入する予定はありますか？」
          </h4>
          <p>と来ました。ビックリです。英語で来るとは...驚いた...</p>
          <p>(写真)</p>
          <p><img src="./thumbnail.png" alt="写真だよ" style="width: 100%" /></p>
          <p>そういうわけでさっそくつくることにしました。</p>
          <p>といっても多言語対応なんてやったことがなかったので、調べます</p>
          <p>...</p>
          <p>...</p>
          <p>...</p>
          <p>方法は結構あるみたいですね</p>
          <h2>多言語対応の方法</h2>
          <h3>1.ドメインを分けてそれぞれで作る</h3>
          <p>ドメインの入手が金をかけないと困難だったので却下</p>
          <h3>2.ディレクトリを分けてそれぞれで作る</h3>
          <p>複数同じページを書くことや更新が面倒臭いので、却下</p>
          <h3>3.GOOGLE翻訳</h3>
          <p>SEO対策的に却下</p>
          <h2>結果</h2>
          <h3>「自作すること」</h3>
          <p>にしました。というわけでプログラムを組んでいきましょう。</p>
          <p>主なコンセプトとしては、</p>
          <p>・保守/更新が簡単</p>
          <p>・軽い</p>
          <p>
          といった点を重視したので、コードは共通で、データはjsonでそれぞれのディレクトリに入れることにします。
          </p>
          <p><img
          src="./img/language-support.jpeg"
          alt="language-support.js"
          style="width: 100%" /><br />
          &lt;a<br />
          target=&rdquo;_parent&rdquo;<br />
          href=&rdquo;https://github.com/The-Infinitys/the-infinitys.github.io/blob/main/layout/language-support.js&rdquo;</p>
          <blockquote>
          <p>view language-support.js&lt;/a<br />
          </p>
          </blockquote>
          <p>まずはプログラム、language-support.jsです。</p>
          <p>仕組みとしては...</p>
          <p>1.翻訳を実行する関数を定義(translate_Infinitys)</p>
          <p>2.main関数を定義</p>
          <p>3.実行</p>
          <p>というステップになっています。</p>
          <p>というわけで2について詳しく説明します。</p>
          <p>まずは、navigator.languageから言語を取得します。</p>
          <p>
          その上で、もしlangパラメータが存在していれば、それでlanguageを上書きをします。
          </p>
          <p>次に、現在地のURLから、language.jsonファイルの場所を計算し、</p>
          <p>
          fetch()。で成功したら、jsonファイルとして読み込み、それも成功したら、translate_Infinitys()を実行します。
          </p>
          <p>この時にエラーが出た際はalertで再読み込みを促します。</p>
          <p>そして、データ、language.jsonです。</p>
          <p><img src="./img/language.jpeg" alt="" style="width: 100%" /><br />
          &lt;a<br />
          target=&rdquo;_parent&rdquo;<br />
          href=&rdquo;https://github.com/The-Infinitys/the-infinitys.github.io/blob/main/language.json&rdquo;</p>
          <blockquote>
          <p>view language.json&lt;/a<br />
          </p>
          </blockquote>
          <p>
          構造としては、普通にオブジェクト内に、対応している言語のキー(en,en-USとか)をいれて、
          </p>
          <p>それぞれに配列をセット。でその配列内には、</p>
          <p><code></p>
          <pre>{</pre>
          <pre>"elem":"エレメントのセレクタ"</pre>
          <pre>"text":"置き換えるテキスト"</pre>
          <pre>}</pre>
          <p></code></p>
          <p>というふうな構造の変換データを入れておきます。これで完成です。</p>
          <p>
          プログラムは変えなくてもどこでも融通が効くし、なんなら別ドメインでも行けちゃう。
          </p>
          <p>
          さらに更新する必要があるのはjsonファイル一つだけなので、そこも便利。
          </p>
          <p>個人的には超満足な出来です。</p>
          <p>というわけでUnknownさん。ありがとうございました!</p>
          <p>以上!2024年5月最後のThe Infinity'sのブログでした!</p>

          </InfinitySpiritContent>
    </div>
    <div class="article-share" onclick="copyURL()">
      <img src="/InfinitySpirit/layout/image/Infinity-clipboard.svg" alt="" />
      Copy To ClipBoard
    </div>
    <div class="article-share" onclick="shareX()">
      <img src="/InfinitySpirit/layout/image/X-Infinity.svg" alt="" />
      Share On X
    </div>
    <div class="article-index"></div>
    <div class="articles-recommended">
      <button>
        <img src="/InfinitySpirit/layout/image/loading.svg" alt="" />
        <div>
          <h1>THE INFINITYS BELIEVE THE INFINITY</h1>
          <p>date:2024/07/07</p>
        </div>
      </button>
    </div>
  </div>
</body>

</html>
